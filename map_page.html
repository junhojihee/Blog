<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>지도와 마커 페이지</title>
</head>
<body>
    <div id="map" style="width:100%;height:700px;"></div>
    
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=6b72dfe6dbe62fc2ba626c0911fcc37e"></script>
    <script>
        var mapContainer = document.getElementById('map'),
            mapOption = {
                center: new kakao.maps.LatLng(33.450701, 126.570667),
                level: 3
            };

        var map = new kakao.maps.Map(mapContainer, mapOption);
        var markers = [];

        // URL에서 주소 파라미터를 가져오기
        var urlParams = new URLSearchParams(window.location.search);
        var addresses = urlParams.get('addresses');

        if (addresses) {
            var addressArray = addresses.split('\n');
            var geocoder = new kakao.maps.services.Geocoder();

            addressArray.forEach(function(address) {
                geocoder.addressSearch(address, function(result, status) {
                    if (status === kakao.maps.services.Status.OK) {
                        var coords = new kakao.maps.LatLng(result[0].y, result[0].x);
                        var marker = new kakao.maps.Marker({
                            map: map,
                            position: coords,
                            title: address // 주소를 마커 타이틀로 설정
                        });

                        markers.push(marker);

                        // 중심 위치 설정 (마지막 주소의 위치를 중심으로 설정)
                        map.setCenter(coords);
                    } else {
                        alert('주소를 찾을 수 없습니다.');
                    }
                });
            });
        }
    </script>
</body>
</html>
